
<Lems>

<!-- Example of conductance based cell with Na, K (incl [Ca2+] dependent) & Ca channels and a pool of Ca -->


<!-- Specify which component to run -->
    <DefaultRun component="sim1"/>

<!-- Include core NeuroML2 ComponentType definitions -->
    <Include file="NeuroML2CoreTypes/Cells.xml"/>
    <Include file="NeuroML2CoreTypes/Networks.xml"/>
    <Include file="NeuroML2CoreTypes/Simulation.xml"/>


    <Include file="concMod1.nml"/>
    <Include file="CaLVA.nml"/>
    <Include file="NaF.nml"/>
    <Include file="Pas.nml"/>
    <Include file="SomaGHK.nml"/>


    <pulseGenerator id="pulseGen1" delay="100ms" duration="100ms" amplitude="-0.01 nA" />
    <pulseGenerator id="pulseGen2" delay="500ms" duration="100ms" amplitude="0.01 nA" />

    <voltageClamp id="vClamp1" delay="150ms" duration="50ms" targetVoltage="10mV" seriesResistance="1ohm"/>

    <network id="net1">
        <extracellularProperties temperature="32degC"/>
        <population id="hhpop" component="SomaGHK" size="1"/>
        <explicitInput target="hhpop[0]" input="pulseGen1"/>
        <explicitInput target="hhpop[0]" input="pulseGen2"/>
    </network>


        <!-- End of NeuroML2 content -->


    <Simulation id="sim1" length="800ms" step="0.01ms" target="net1">

        <Display id="d1" title="GHK Test: Voltage (mV)" timeScale="1ms">
            <Line id="l1" quantity="hhpop[0]/v" scale="1mV"  color="#ffffff" save="NML2_LEMS_v.dat"/>
            <!--<Line id="l5" quantity="hhpop[0]/biophys/membraneProperties/CaLVA_all/erev" scale="1uA_per_cm2"  color="#00ff00" save="NML2_LEMS_cae.dat"/>-->
        </Display>

        <Display id="d2" title="GHK Test: rate variables" timeScale="1ms">

            <Line id="l1" quantity="hhpop[0]/biophys/membraneProperties/CaLVA_all/CaLVA/m/q" scale="1"  color="#770fff" save="NML2_LEMS_ca_m.dat"/>
            <Line id="l2" quantity="hhpop[0]/biophys/membraneProperties/CaLVA_all/CaLVA/h/q" scale="1"  color="#55f00f" save="NML2_LEMS_ca_h.dat"/><!-- -->
            <Line id="l3" quantity="hhpop[0]/biophys/membraneProperties/NaF_all/NaF/m/q" scale="1"  color="#77000f" save="NML2_LEMS_na_m.dat"/>
            <Line id="l4" quantity="hhpop[0]/biophys/membraneProperties/NaF_all/NaF/h/q" scale="1"  color="#7ee00f" save="NML2_LEMS_na_h.dat"/>
 
        </Display>

        <Display id="d3" title="GHK Test: current densities (uA_per_cm2)" timeScale="1ms">
            <Line id="l5" quantity="hhpop[0]/biophys/membraneProperties/CaLVA_all/iDensity" scale="1mA_per_cm2"  color="#00ff00" save="NML2_LEMS_ica.dat"/><!--  - -->
            <Line id="l6" quantity="hhpop[0]/biophys/membraneProperties/NaF_all/iDensity" scale="1mA_per_cm2"  color="#00ffff" save="NML2_LEMS_ina.dat"/>
        </Display>
<!--
       <Display id="d3" title="GHK Test: Ca concentration (mM)" timeScale="1ms">
            <Line id="li12" quantity="hhpop[0]/caConc" scale="1 mM"  color="#ffffff" save="NML2_LEMS_c2.dat"/>
        </Display> 


        <Display id="d4" title="GHK Test: current totals" timeScale="1ms">
            <Line id="l0" quantity="hhpop[0]/pulseGen1/i" scale="1nA"  color="#dddddd" save="NML2_LEMS_naigc1.dat"/>
            <Line id="l1" quantity="hhpop[0]/pulseGen2/i" scale="1nA"  color="#dd3333" save="NML2_LEMS_naigc2.dat"/>
            <Line id="l2" quantity="hhpop[0]/iCa" scale="1nA"  color="#00aa00" save="NML2_LEMS_naic2.dat"/>
        </Display> -->
<!-- - -->
        <Display id="d5" title="GHK Test: taus" timeScale="1ms">
            <Line id="l01" quantity="hhpop[0]/biophys/membraneProperties/CaLVA_all/CaLVA/m/tau" scale="1ms"  color="#ddd222" save="NML2_LEMS_mtau.dat"/>
            <Line id="l02" quantity="hhpop[0]/biophys/membraneProperties/CaLVA_all/CaLVA/h/tau" scale="1ms"  color="#555222" save="NML2_LEMS_htau.dat"/>
        </Display>


    </Simulation>


</Lems>
